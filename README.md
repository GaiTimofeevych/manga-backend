# üìö Manga Reader API

Backend-—Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã —á—Ç–µ–Ω–∏—è –º–∞–Ω–≥–∏ —Å –ø–æ–¥–ø–∏—Å–æ—á–Ω–æ–π –º–æ–¥–µ–ª—å—é (Paywall).
–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∫–∞–∫ Pet-–ø—Ä–æ–µ–∫—Ç –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–∞–≤—ã–∫–æ–≤ backend-—Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

## üõ† –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

*   **Language:** Python 3.12
*   **Framework:** FastAPI
*   **Database:** PostgreSQL (Async via SQLAlchemy 2.0)
*   **Migrations:** Alembic
*   **Caching:** Redis (fastapi-cache2)
*   **Containerization:** Docker & Docker Compose
*   **Testing:** Pytest (Async)
*   **Auth:** JWT (Access Token), Hashing (Bcrypt)

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

*   **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏:** –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è, –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (JWT), –†–æ–ª–µ–≤–∞—è –º–æ–¥–µ–ª—å.
*   **–ö–∞—Ç–∞–ª–æ–≥:** CRUD –¥–ª—è –ú–∞–Ω–≥–∏ –∏ –ì–ª–∞–≤. –•—Ä–∞–Ω–µ–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –≤ JSONB.
*   **–ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞:**
    *   **Paywall:** –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–ª–∞—Ç–Ω—ã–º –≥–ª–∞–≤–∞–º.
    *   **–ü–æ–¥–ø–∏—Å–∫–∏:** –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –ø–æ–¥–ø–∏—Å–∫–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:** –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–ø—É–ª—è—Ä–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ Redis.

## ‚ö°Ô∏è –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–ü—Ä–æ–µ–∫—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é —É–ø–∞–∫–æ–≤–∞–Ω –≤ Docker. –î–ª—è –∑–∞–ø—É—Å–∫–∞ —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ Docker Desktop.

```bash
# 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
git clone https://github.com/–¢–í–û–ô_–ù–ò–ö/manga-backend.git
cd manga-backend

# 2. –°–æ–∑–¥–∞–Ω–∏–µ .env —Ñ–∞–π–ª–∞
# (–ú–æ–∂–Ω–æ —Å–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–º–µ—Ä, –µ—Å–ª–∏ –µ—Å—Ç—å, –∏–ª–∏ —Å–æ–∑–¥–∞—Ç—å —Å–≤–æ–π)
echo "POSTGRES_USER=manga_user" > .env
echo "POSTGRES_PASSWORD=manga_password" >> .env
echo "POSTGRES_DB=manga_db" >> .env
echo "POSTGRES_SERVER=db" >> .env
echo "POSTGRES_PORT=5432" >> .env
echo "REDIS_URL=redis://redis:6379" >> .env

# 3. –ó–∞–ø—É—Å–∫
docker compose up --build -d
```

–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API (Swagger) –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É:
üëâ http://localhost:8000/docs

üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–¢–µ—Å—Ç—ã –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```bash
docker compose exec backend pytest -v
```

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

    app/api: –†–æ—É—Ç—ã (Controllers)

    app/core: –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è, –ë–î, –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

    app/models: SQLAlchemy –º–æ–¥–µ–ª–∏

    app/schemas: Pydantic —Å—Ö–µ–º—ã

    app/services: –ë–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∞

    tests: Pytest —Ç–µ—Å—Ç—ã